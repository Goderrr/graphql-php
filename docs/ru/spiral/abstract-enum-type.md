# Абстрактный класс AbstractEnumType

Абстрактный класс `Andi\GraphQL\Type\AbstractEnumType` позволяет определять перечислимые GraphQL типы
без необходимости реализации методов вспомогательных интерфейсов. Большинство интерфейсов уже
реализовано в абстрактном классе, вам достаточно задать значения его свойств, чтобы определить
результат реализованных методов.

Пример реализации абстрактного класса:

```php
namespace App\GraphQL\Type;

use Andi\GraphQL\Type\AbstractEnumType;

final class CoinSides extends AbstractEnumType
{
    protected string $name = 'CoinSides';

    protected iterable $values = [
        'heads' => true,
        'tails' => [
            'value' => false,
            'description' => 'Tails of coin',
        ],
    ];
}
```

При реализации перечислимого GraphQL типа с помощью абстрактного класса `AbstractEnumType` необходимо
определить значения следующих свойств:

<table>
    <tr>
        <th>Имя</th>
        <th>Тип</th>
        <th>Описание</th>
    </tr>
    <tr>
        <td valign="top"><code>$name</code></td>
        <td valign="top"><code>string</code></td>
        <td valign="top">Имя перечислимого типа, <b>обязательно</b> должно быть определено.</td>
    </tr>
    <tr>
        <td valign="top"><code>$description</code></td>
        <td valign="top"><code>string</code></td>
        <td valign="top">
            Описание перечислимого типа, отображаемое в GraphQL схеме.
            Не определяйте значение, если описание не требуется.
        </td>
    </tr>
    <tr>
        <td valign="top"><code>$values</code></td>
        <td valign="top"><code>iterable</code></td>
        <td valign="top">
            <p>Список возможных значений перечислимого типа. <b>Обязательно</b> должно быть определено.</p>
            <p>Требования к элементам итерируриемой структуры свойства изложены ниже.</p>
        </td>
    </tr>
</table>

## Определение итерируемой структуры `$values`

```php
// Каждый элемент интерируемой структуры $values может быть:
$this->values = [
    // экземпляром класса, реализующего интерфейс EnumValueInterface
    new class implements EnumValueInterface {...},

    // строкой с числовым индексом.
    // В этом случае в качестве имени и значения будет использована данная строка.
    'red',

    // ключ => значение. Данная структура интерпретируюется следующим образом:
    //   ключ - имя возможного значения (используется в GraphQL запросах);
    //   значение - соответствующее значение используемое в php.
    // При данной конфигурации:
    // если в GraphQL запросе было указано возможное значение 'green',
    // в php оно будет преобразовано в '#00FF00'.
    // Допустим любой тип данных (в том числе объект).
    'green' => '#00FF00',

    // ассоциативным массивом в виде конфигурации возможного значения
    'blue' => [
        // Если опция конфигурации 'name' опущена (как в этом примере), в качестве имени возможного значения
        // будет использован ключ структуры, в данном случае 'blue'.
        // 'name' => 'sapphirine',

        // Необязательная опция, определяющая внутреннее (в php) значение. Допустим любой тип данных.
        // Если опция конфигурации отсутствует, в качестве значения будет использовано имя возможного значения.
        'value' => '#0000FF',

        // Описание возможного значения, используется для отображения в GraphQL схеме.
        // Данная опция не обязательна.
        'description' => 'EnumValue description',

        // Данная опция не обязательна. Следует определить значение опции, если в GraphQL схеме
        // необходимо указать причину по которой данное возможное значение перечисления использовать
        // не рекомендуется.
        'deprecationReason' => 'This enum value is deprecated. Do not use it.',
    ],
];
```

Итого: защищенное свойство `$values`, имеет итерируемую структуру. Может содержать следующие элементы:
- экземпляр класса, реализующего интерфейс `EnumValueInterface`;
- `'ключ' => 'значение'`, где строковый ключ будет использован как имя возможного значения
  (имя используемое в GraphQL запросах), а значение - значение используемое в php;
- ассоциативный массив опций конфигурации возможного значения.

Опции конфигурации возможного значения могут быть следующими:

<table>
    <tr>
        <th>Опция</th>
        <th>Тип</th>
        <th>Описание</th>
    </tr>
    <tr>
        <td valign="top"><code>name</code></td>
        <td valign="top"><code>string</code></td>
        <td valign="top">
            Имя возможного значения (используемое в GraphQL запросах).
            Если не указано, в качестве имени будет использован ключ итерируемой структуры.
        </td>
    </tr>
    <tr>
        <td valign="top"><b><code>value</code></b></td>
        <td valign="top"><code>mixed</code></td>
        <td valign="top">
            <p>Необязательная опция, определяющая значение, доступное в php.</p>
            <p>Если опция не задана, будет использовано имя возможного значения.</p>
        </td>
    </tr>
    <tr>
        <td valign="top"><code>description</code></td>
        <td valign="top"><code>string</code></td>
        <td valign="top">Описание возможного значения.</td>
    </tr>
    <tr>
        <td valign="top"><code>deprecationReason</code></td>
        <td valign="top"><code>string</code></td>
        <td valign="top">
            Если опция задана, то в GraphQL схеме возможное значение перечисления будет помечено устаревшим.
            В качестве причины будет указано значение данной опции.
        </td>
    </tr>
</table>
